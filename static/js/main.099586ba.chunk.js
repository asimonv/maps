(this.webpackJsonpmaps=this.webpackJsonpmaps||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(18),i=n.n(a),s=(n(68),n(69),n(12)),o=n(55),l=n.n(o),j={WS_BASE:"wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",WS_PATH:"/flights"},u=n(10),d=n(14),h=n.n(d),b=n(26),p={CHAT_NEW_MESSAGE:"CHAT_NEW_MESSAGE",CHAT_NEW_MESSAGE_REJECTED:"CHAT_NEW_MESSAGE_REJECTED"},O={FLIGHTS_NEW_POSITION:"FLIGHTS_NEW_POSITION",FLIGHTS_NEW_POSITION_REJECTED:"FLIGHTS_NEW_POSITION_REJECTED",FLIGHTS_FULFILLED:"FLIGHTS_FULFILLED",FLIGHTS_REJECTED:"FLIGHTS_REJECTED"},f=function(e,t){return{type:t,payload:e}},x=function(e,t){return{type:t,payload:e}},g=n(1),E=Object(c.createContext)(null),v=function(e){var t=e.children,n=Object(c.useState)(),r=Object(s.a)(n,2),a=r[0],i=r[1],o=Object(u.b)();return Object(c.useEffect)((function(){var e=l()(j.WS_BASE,{path:j.WS_PATH});return e.on("CHAT",(function(e){var t;console.warn(e),o((t=e,function(){var e=Object(b.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n(x(t,p.CHAT_NEW_MESSAGE))}catch(c){n(f(c,p.CHAT_NEW_MESSAGE_REJECTED))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),e.on("POSITION",(function(e){var t;o((t=e,function(){var e=Object(b.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n(x(t,O.FLIGHTS_NEW_POSITION))}catch(c){n(f(c,O.FLIGHTS_NEW_POSITION_REJECTED))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),e.on("FLIGHTS",(function(e){var t;o((t=e,function(){var e=Object(b.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n(x(t,O.FLIGHTS_FULFILLED))}catch(c){n(f(c,O.FLIGHTS_REJECTED))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),i({socket:e}),function(){e&&e.disconnect()}}),[o]),Object(g.jsx)(E.Provider,{value:a,children:t})},S=n(56),m=n(13),T=n(35),_=n(57),y=n.n(_),I=n(58),L=n(59),C=n(30),F=n(2);var H,w,G,A,N,W,D=Object(m.b)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.CHAT_NEW_MESSAGE:return Object(F.a)(Object(F.a)({},e),{},{messages:[].concat(Object(C.a)(e.messages),[t.payload])});default:return Object(F.a)({},e)}},flights:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{positions:new Map,flights:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.FLIGHTS_NEW_POSITION:var n=t.payload,c=n.code,r=n.position,a=new Map(e.positions);return a.set(c,r),Object(F.a)(Object(F.a)({},e),{},{positions:a});case O.FLIGHTS_FULFILLED:return Object(F.a)(Object(F.a)({},e),{},{flights:t.payload.map((function(e){return Object(F.a)(Object(F.a)({},e),{},{color:"#".concat(Math.floor(16777215*Math.random()).toString(16))})}))});default:return Object(F.a)({},e)}}}),P={key:"root",storage:y.a},M=Object(m.a)(L.a,Object(I.createLogger)()),k=Object(T.a)(P,D),J=Object(m.c)(k,{},M),R=Object(T.b)(J),U=n(15),z=n(60),B=n.n(z),Z=n(16),q=Z.a.div(H||(H=Object(U.a)(["\n  padding: 5px;\n  border-radius: 5px;\n  border: 1px solid lightgray;\n  margin-bottom: 10px;\n  display: flex;\n  flex-direction: column;\n"]))),K=Z.a.div(w||(w=Object(U.a)(["\n  display: flex;\n"]))),Q=Z.a.span(G||(G=Object(U.a)(["\n  color: gray;\n  font-size: x-small;\n  text-transform: uppercase;\n  margin-bottom: 5px;\n  font-weight: bold;\n"]))),V=Z.a.span(A||(A=Object(U.a)(["\n  font-weight: bold;\n"]))),X=Z.a.span(N||(N=Object(U.a)(["\n  margin-left: 10px;\n"]))),Y=function(e){var t=e.data,n=t.message,c=t.name,r=t.date;return Object(g.jsxs)(q,{children:[Object(g.jsx)(Q,{children:B()(r).fromNow()}),Object(g.jsxs)(K,{children:[Object(g.jsx)(V,{children:c}),Object(g.jsx)(X,{children:n})]})]})},$=function(){var e=Object(c.useContext)(E),t=Object(c.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(""),o=Object(s.a)(i,2),l=o[0],j=o[1],d=Object(u.c)((function(e){return{chat:e.chat}})).chat.messages;return Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column",padding:20},children:[Object(g.jsx)("p",{children:"Centro de Control"}),Object(g.jsx)("div",{style:{height:"calc(100vh - 120px)",overflow:"scroll"},children:d.map((function(e){return Object(g.jsx)(Y,{data:e})}))}),Object(g.jsx)("input",{placeholder:"username",onChange:function(e){var t=e.target.value;j(t)},value:l}),Object(g.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(g.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;a(t)},value:r,placeholder:"write something"}),Object(g.jsx)("button",{onClick:function(){e.socket.emit("CHAT",{name:l,message:r}),a("")},children:"Send"})]})]})},ee=Z.a.div(W||(W=Object(U.a)(["\n  border: 1px solid lightgray;\n  border-radius: 2px;\n  margin: 5px;\n  padding: 10px;\n"]))),te=function(e){var t=e.flight,n=t.code,c=t.airline,r=t.plane,a=t.seats,i=t.passengers;return Object(g.jsxs)(ee,{children:[Object(g.jsx)("p",{style:{fontWeight:"bold",fontSize:"large"},children:n}),Object(g.jsx)("span",{children:"".concat(r," - ").concat(c)}),Object(g.jsxs)("p",{children:["Pasajeros: ",a]}),i.map((function(e){var t=e.name,n=e.age;return Object(g.jsx)("div",{children:"".concat(t," - ").concat(n)})}))]})},ne=function(){var e=(Object(c.useContext)(E)||{}).socket,t=Object(u.c)((function(e){return{flights:e.flights}})).flights.flights;Object(c.useEffect)((function(){e&&e.emit("FLIGHTS")}),[e]);return Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{children:"Flights"}),Object(g.jsx)("button",{onClick:function(){e&&e.emit("FLIGHTS")},children:"Get info"}),Object(g.jsx)("div",{style:{height:"calc(100vh - 500px)",overflow:"scroll"},children:t.map((function(e){return Object(g.jsx)(te,{flight:e})}))})]})},ce=n(110),re=n(114),ae=n(115),ie=n(111),se=n(112),oe=n(113),le=n(3),je=n.n(le),ue=n.p+"static/media/plane-2.207d926b.svg",de=new je.a.Icon({iconUrl:ue,iconRetinaUrl:ue,iconAnchor:null,popupAnchor:null,shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:new je.a.Point(60,60),className:"leaflet-div-icon"}),he=function(){var e=Object(u.c)((function(e){return{flights:e.flights}})).flights,t=e.flights,n=e.positions;return Object(g.jsxs)(ce.a,{center:[35.6751,71.543],scrollWheelZoom:!1,zoom:2,style:{height:400},children:[Object(g.jsx)(re.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map((function(e){var t=e.origin,n=e.destination,c=e.code,r=e.color;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(ae.a,{center:t,pathOptions:{color:r},radius:2e3}),Object(g.jsx)(ie.a,{positions:[t,n],pathOptions:{dashArray:[10,10],color:r}},c),Object(g.jsx)(ae.a,{center:n,pathOptions:{color:r},radius:2e3})]})})),Object(C.a)(n.keys()).map((function(e){var t=n.get(e);return t?Object(g.jsx)(se.a,{icon:de,position:{lat:t[0],lng:t[1]},children:Object(g.jsx)(oe.a,{children:e})}):null}))]})},be=function(){return Object(g.jsx)("div",{style:{display:"flex"},children:Object(g.jsxs)("div",{style:{flex:1,display:"flex"},children:[Object(g.jsxs)("div",{style:{flexDirection:"column",flex:1},children:[Object(g.jsxs)("div",{style:{flex:1,height:"400px"},children:[Object(g.jsx)("p",{children:"Map"}),Object(g.jsx)(he,{})]}),Object(g.jsx)(ne,{})]}),Object(g.jsx)("div",{style:{flex:1},children:Object(g.jsx)($,{})})]})})};var pe=function(){return Object(g.jsx)(u.a,{store:J,children:Object(g.jsx)(S.a,{loading:null,persistor:R,children:Object(g.jsx)(v,{children:Object(g.jsx)(be,{})})})})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,116)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(pe,{})}),document.getElementById("root")),Oe()},68:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.099586ba.chunk.js.map